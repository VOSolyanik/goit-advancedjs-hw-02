{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\n\nclass CustomTimer {\n  selectedDate = null;\n  timerInterval = null;\n\n  flatpickrOptions = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose: selectedDates => this.onCloseHandler(selectedDates),\n  };\n\n  iziToastErrorOptions = {\n    title: 'Error',\n    message: 'Please choose a date in the future!',\n    position: 'topRight',\n  };\n\n  constructor({\n    startButtonSelector,\n    datePickerSelector,\n    timeElementsSelectors,\n  }) {\n    this.startButton = document.querySelector(startButtonSelector);\n    this.datePickerElement = document.querySelector(datePickerSelector);\n\n    this.timeElements = {\n      days: document.querySelector(timeElementsSelectors.days),\n      hours: document.querySelector(timeElementsSelectors.hours),\n      minutes: document.querySelector(timeElementsSelectors.minutes),\n      seconds: document.querySelector(timeElementsSelectors.seconds),\n    };\n\n    flatpickr(this.datePickerElement, this.flatpickrOptions);\n\n    this.startButton.disabled = true;\n\n    this.#initEventListeners();\n  }\n\n  #initEventListeners() {\n    this.startButton.addEventListener('click', () =>\n      this.#startTimer(this.selectedDate)\n    );\n  }\n\n  #startTimer(selectedDate) {\n    this.startButton.disabled = true;\n    this.datePickerElement.disabled = true;\n\n    this.#renderTime(selectedDate - Date.now());\n\n    this.timerInterval = setInterval(() => {\n      const delta = selectedDate - Date.now();\n      if (delta > 0) {\n        this.#renderTime(delta);\n      } else {\n        this.#stopTimer();\n      }\n    }, 1000);\n  }\n\n  #stopTimer() {\n    if (this.timerInterval) {\n      clearInterval(this.timerInterval);\n      this.timerInterval = null;\n    }\n\n    for (const key in this.timeElements) {\n      this.timeElements[key].innerHTML = '00';\n    }\n\n    this.datePickerElement.disabled = false;\n  }\n\n  #convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    return {\n      days: Math.floor(ms / day),\n      hours: Math.floor((ms % day) / hour),\n      minutes: Math.floor(((ms % day) % hour) / minute),\n      seconds: Math.floor((((ms % day) % hour) % minute) / second),\n    };\n  }\n\n  #renderTime(timeDelta) {\n    const units = this.#convertMs(timeDelta);\n    for (const key in units) {\n      this.timeElements[key].innerHTML = units[key]\n        .toString()\n        .padStart(2, '0');\n    }\n  }\n\n  onCloseHandler(selectedDates) {\n    if (selectedDates[0].getTime() > Date.now()) {\n      this.startButton.disabled = false;\n      this.selectedDate = selectedDates[0].getTime();\n    } else {\n      this.startButton.disabled = true;\n      iziToast.error(this.iziToastErrorOptions);\n    }\n  }\n}\n\nconst timer = new CustomTimer({\n  startButtonSelector: '[data-start]',\n  datePickerSelector: '#datetime-picker',\n  timeElementsSelectors: {\n    days: '[data-days]',\n    hours: '[data-hours]',\n    minutes: '[data-minutes]',\n    seconds: '[data-seconds]',\n  },\n});"],"names":["CustomTimer","startButtonSelector","datePickerSelector","timeElementsSelectors","__privateAdd","_CustomTimer_instances","__publicField","selectedDates","flatpickr","__privateMethod","initEventListeners_fn","iziToast","startTimer_fn","selectedDate","renderTime_fn","delta","stopTimer_fn","key","convertMs_fn","ms","timeDelta","units"],"mappings":"+iBAGA,MAAMA,CAAY,CAkBhB,YAAY,CACV,oBAAAC,EACA,mBAAAC,EACA,sBAAAC,CACJ,EAAK,CAtBLC,EAAA,KAAAC,GACEC,EAAA,oBAAe,MACfA,EAAA,qBAAgB,MAEhBA,EAAA,wBAAmB,CACjB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAASC,GAAiB,KAAK,eAAeA,CAAa,CAC/D,GAEED,EAAA,4BAAuB,CACrB,MAAO,QACP,QAAS,sCACT,SAAU,UACd,GAOI,KAAK,YAAc,SAAS,cAAcL,CAAmB,EAC7D,KAAK,kBAAoB,SAAS,cAAcC,CAAkB,EAElE,KAAK,aAAe,CAClB,KAAM,SAAS,cAAcC,EAAsB,IAAI,EACvD,MAAO,SAAS,cAAcA,EAAsB,KAAK,EACzD,QAAS,SAAS,cAAcA,EAAsB,OAAO,EAC7D,QAAS,SAAS,cAAcA,EAAsB,OAAO,CACnE,EAEIK,EAAU,KAAK,kBAAmB,KAAK,gBAAgB,EAEvD,KAAK,YAAY,SAAW,GAE5BC,EAAA,KAAKJ,EAAAK,GAAL,UACD,CA4DD,eAAeH,EAAe,CACxBA,EAAc,CAAC,EAAE,QAAO,EAAK,KAAK,OACpC,KAAK,YAAY,SAAW,GAC5B,KAAK,aAAeA,EAAc,CAAC,EAAE,QAAO,IAE5C,KAAK,YAAY,SAAW,GAC5BI,EAAS,MAAM,KAAK,oBAAoB,EAE3C,CACH,CA3GAN,EAAA,YAwCEK,EAAmB,UAAG,CACpB,KAAK,YAAY,iBAAiB,QAAS,IACzCD,EAAA,KAAKJ,EAAAO,GAAL,UAAiB,KAAK,aAC5B,CACG,EAEDA,EAAW,SAACC,EAAc,CACxB,KAAK,YAAY,SAAW,GAC5B,KAAK,kBAAkB,SAAW,GAElCJ,EAAA,KAAKJ,EAAAS,GAAL,UAAiBD,EAAe,KAAK,IAAK,GAE1C,KAAK,cAAgB,YAAY,IAAM,CACrC,MAAME,EAAQF,EAAe,KAAK,IAAG,EACjCE,EAAQ,EACVN,EAAA,KAAKJ,EAAAS,GAAL,UAAiBC,GAEjBN,EAAA,KAAKJ,EAAAW,GAAL,UAEH,EAAE,GAAI,CACR,EAEDA,EAAU,UAAG,CACP,KAAK,gBACP,cAAc,KAAK,aAAa,EAChC,KAAK,cAAgB,MAGvB,UAAWC,KAAO,KAAK,aACrB,KAAK,aAAaA,CAAG,EAAE,UAAY,KAGrC,KAAK,kBAAkB,SAAW,EACnC,EAEDC,EAAU,SAACC,EAAI,CAMb,MAAO,CACL,KAAM,KAAK,MAAMA,EAAK,KAAG,EACzB,MAAO,KAAK,MAAOA,EAAK,MAAO,IAAI,EACnC,QAAS,KAAK,MAAQA,EAAK,MAAO,KAAQ,GAAM,EAChD,QAAS,KAAK,MAASA,EAAK,MAAO,KAAQ,IAAU,GAAM,CACjE,CACG,EAEDL,EAAW,SAACM,EAAW,CACrB,MAAMC,EAAQZ,EAAA,KAAKJ,EAAAa,GAAL,UAAgBE,GAC9B,UAAWH,KAAOI,EAChB,KAAK,aAAaJ,CAAG,EAAE,UAAYI,EAAMJ,CAAG,EACzC,SAAU,EACV,SAAS,EAAG,GAAG,CAErB,EAaW,IAAIjB,EAAY,CAC5B,oBAAqB,eACrB,mBAAoB,mBACpB,sBAAuB,CACrB,KAAM,cACN,MAAO,eACP,QAAS,iBACT,QAAS,gBACV,CACH,CAAC"}